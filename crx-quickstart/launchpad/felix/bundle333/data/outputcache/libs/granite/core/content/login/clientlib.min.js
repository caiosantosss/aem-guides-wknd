(function(a){function g(c,b){setTimeout(function(){var f=a.getElementById(c);f.hidden=!1;f.content.innerHTML=b},150)}function l(c){c=a.getElementById(c);c.hidden=!0;c.content.innerHTML=""}function h(){for(var c=a.querySelectorAll("input[type\x3dpassword]"),b=0;b<c.length;b++)c[b].value=""}function d(){g("error",a.getElementById("expired_message").value);a.getElementById("sign-in-title").innerHTML=a.getElementById("change_title").value;a.getElementById("submit-button").value=a.getElementById("change_submit_text").value;
h();a.getElementById("sign-in-title").hidden=!1;a.getElementById("new_password").hidden=!1;a.getElementById("confirm_password").hidden=!1;a.getElementById("back-button").hidden=!1;a.getElementById("back-button").on("click",function(c){a.getElementById("sign-in-title").innerHTML=a.getElementById("login_title").value;a.getElementById("submit-button").value=a.getElementById("login_submit_text").value;h();a.getElementById("new_password").hidden=!0;a.getElementById("confirm_password").hidden=!0;a.getElementById("back-button").hidden=
!0;a.getElementById("username").focus();var b=a.getElementById("error");b.hidden=!0;b.content.innerHTML="";c.preventDefault()});a.getElementById("password").focus()}function e(){var c=a.getElementById("resource").value;window.location.hash&&0>c.indexOf("#")&&(c+=window.location.hash);a.location=c}function k(c){var b=[],f;for(f in c)c.hasOwnProperty(f)&&b.push(encodeURIComponent(f)+"\x3d"+encodeURIComponent(c[f]));return b.join("\x26")}a.addEventListener("DOMContentLoaded",function(c){(c=a.getElementById("submit-button-ims"))&&
c.addEventListener("click",function(){var b=a.head.querySelector('meta[name\x3d"granite.login.imsLoginUrl"]');b&&(b=b.content)&&a.location.replace(b)});a.getElementById("login").addEventListener("submit",function(b){l("error");b.preventDefault();b=this.action;var f=this.j_username.value,n=this.j_password.value;if(!f)return b="blank_user",n||(b="blank_user_passwd"),g("error",a.getElementById(b).value),h(),a.getElementById("username").value="",a.getElementById("username").focus(),!0;n={_charset_:"utf-8",
j_username:f,j_password:n,j_validate:!0};if(!1===a.getElementById("new_password").hidden&&!1===a.getElementById("confirm_password").hidden){f=a.getElementById("new_password");var q=a.getElementById("confirm_password");if(0===f.value.length)return h(),f.focus(),g("error",a.getElementById("empty_message").value),!1;if(f.value!==q.value)return h(),a.getElementById("password").focus(),g("error",a.getElementById("not_match_message").value),!1;n.j_newpassword=a.getElementById("new_password").value}var m=
new XMLHttpRequest;m.open("POST",b,!1);m.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset\x3dUTF-8");m.onload=function(){if(m.readyState===XMLHttpRequest.DONE)if(200===m.status)if(a.getElementById("new_password").hidden&&a.getElementById("confirm_password").hidden)e();else{var p=a.getElementById("success-dialog");p.on("coral-overlay:close",function(){e()});p.show()}else p=m.getResponseHeader("X-Reason-Code"),"password_expired"===p?d():(g("error",a.getElementById("password_expired_and_new_password_in_history"===
p?"in_history_message":"invalid_message").value),h(),a.getElementById("username").focus())};m.send(k(n));return!0})});window.onload=function(){(-1<window.location.search.indexOf("j_reason_code\x3dinvalid_login")||-1<window.location.search.indexOf("j_reason\x3dAuthentication+Failed\x26j_reason_code\x3dunknown"))&&g("ims-error",a.getElementById("invalid_ims_message").value)}})(document);
jQuery(function(a){function g(d){d=d.replace(/[^a-zA-Z0-9-_]/g,"");if(!l||l.name!==d){var e=h[d];e?e.$el&&(e.$el.detach(),a("#backgrounds").append(e.$el),l=e):(e=h[d]={name:d},a.ajax({url:"login/clientlib/resources/bg/"+d+"/bg.css",dataType:"text",statusCode:{403:function(){}},success:function(k){a("head").append("\x3cstyle\x3e"+k+"\x3c/style\x3e");k="bg_"+d;a("#backgrounds").append('\x3cdiv class\x3d"background" id\x3d"'+k+'"\x3e\x3c/div\x3e');e.$el=a("#"+k);l=e},error:function(){}}))}}var l={name:"default",
$el:a("#bg_default")},h={"default":l};a("#username").on("keyup input blur",function(d){d=a(this).val();var e=d.indexOf("@");if(0>e)g("default");else{var k=d.indexOf(".",e);0>k?g("default"):(d=d.substring(e+1,k),g(d))}})});